<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\ThemeSetting;
use App\Models\PageBuilder;
use App\Models\WidgetSetting;
use App\Models\WebDesign;

class WebDesignManagementSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        $this->command->info('üé® B·∫Øt ƒë·∫ßu t·∫°o d·ªØ li·ªáu m·∫´u cho Web Design Management Module...');

        $this->createWebDesignSettings();
        $this->createThemeSettings();
        $this->createPageBuilders();
        $this->createWidgetSettings();

        $this->command->info('üéâ Ho√†n th√†nh t·∫°o d·ªØ li·ªáu m·∫´u Web Design Management!');
    }

    /**
     * T·∫°o theme settings
     */
    private function createThemeSettings()
    {
        $themes = [
            [
                'name' => 'Default Red Theme',
                'slug' => 'default-red-theme',
                'description' => 'Theme m·∫∑c ƒë·ªãnh v·ªõi m√†u ƒë·ªè ch·ªß ƒë·∫°o, thi·∫øt k·∫ø minimalist',
                'theme_version' => '1.0',
                'author' => 'Core Laravel Team',
                'compatibility' => ['laravel' => '10.x', 'php' => '8.1+'],
                'primary_color' => '#dc2626',
                'secondary_color' => '#1f2937',
                'accent_color' => '#f59e0b',
                'success_color' => '#10b981',
                'warning_color' => '#f59e0b',
                'error_color' => '#ef4444',
                'info_color' => '#3b82f6',
                'bg_primary' => 'bg-white',
                'bg_secondary' => 'bg-gray-50',
                'bg_accent' => 'bg-red-50',
                'font_family_primary' => 'Inter, system-ui, sans-serif',
                'font_family_secondary' => 'Inter, system-ui, sans-serif',
                'font_family_heading' => 'Inter, system-ui, sans-serif',
                'font_size_base' => 16.0,
                'line_height_base' => 1.5,
                'layout_type' => 'full-width',
                'container_max_width' => 1200,
                'sidebar_position' => 'right',
                'sidebar_width' => 300,
                'header_style' => 'default',
                'header_sticky' => true,
                'header_bg_color' => 'bg-white',
                'header_height' => 80,
                'footer_style' => 'default',
                'footer_bg_color' => 'bg-gray-900',
                'footer_text_color' => 'text-white',
                'footer_show_social' => true,
                'footer_show_newsletter' => true,
                'nav_style' => 'horizontal',
                'nav_show_icons' => false,
                'nav_hover_effect' => 'underline',
                'nav_mobile_hamburger' => true,
                'button_style' => 'rounded',
                'button_size' => 'medium',
                'button_shadows' => true,
                'button_hover_effect' => 'scale',
                'card_style' => 'shadow',
                'border_radius' => 8,
                'use_shadows' => true,
                'shadow_intensity' => 'medium',
                'animations_enabled' => true,
                'animation_speed' => 'normal',
                'enabled_animations' => ['fade', 'slide', 'scale'],
                'breakpoints' => [
                    'sm' => '640px',
                    'md' => '768px',
                    'lg' => '1024px',
                    'xl' => '1280px'
                ],
                'mobile_first' => true,
                'mobile_nav_style' => 'overlay',
                'custom_fonts' => [
                    'google_fonts' => ['Inter:300,400,500,600,700']
                ],
                'dark_mode_enabled' => false,
                'rtl_support' => false,
                'print_styles' => true,
                'enabled_features' => ['responsive', 'animations', 'lazy_loading'],
                'css_minification' => true,
                'js_minification' => true,
                'lazy_loading' => true,
                'critical_css' => false,
                'meta_tags' => [
                    'viewport' => 'width=device-width, initial-scale=1',
                    'charset' => 'utf-8'
                ],
                'social_meta' => [
                    'og_type' => 'website',
                    'twitter_card' => 'summary_large_image'
                ],
                'is_active' => true,
                'is_default' => true,
                'status' => 'active',
                'order' => 1
            ],
            [
                'name' => 'Minimal Blue Theme',
                'slug' => 'minimal-blue-theme',
                'description' => 'Theme t·ªëi gi·∫£n v·ªõi m√†u xanh d∆∞∆°ng, ph√π h·ª£p cho business',
                'theme_version' => '1.0',
                'author' => 'Core Laravel Team',
                'primary_color' => '#3b82f6',
                'secondary_color' => '#1e293b',
                'accent_color' => '#06b6d4',
                'layout_type' => 'boxed',
                'container_max_width' => 1140,
                'header_style' => 'minimal',
                'footer_style' => 'minimal',
                'button_style' => 'square',
                'card_style' => 'border',
                'use_shadows' => false,
                'animations_enabled' => false,
                'is_active' => false,
                'is_default' => false,
                'status' => 'active',
                'order' => 2
            ]
        ];

        foreach ($themes as $themeData) {
            $theme = ThemeSetting::firstOrCreate(
                ['slug' => $themeData['slug']],
                $themeData
            );

            // Generate CSS/JS files for active theme
            if ($theme->is_active) {
                $theme->generateCssFile();
                $theme->generateJsFile();
            }
        }

        $this->command->info('‚úÖ ƒê√£ t·∫°o ' . count($themes) . ' theme settings');
    }

    /**
     * T·∫°o page builders
     */
    private function createPageBuilders()
    {
        $pages = [
            [
                'name' => 'Trang ch·ªß m·∫´u',
                'slug' => 'trang-chu-mau',
                'description' => 'Trang ch·ªß ƒë∆∞·ª£c x√¢y d·ª±ng b·∫±ng Page Builder',
                'page_type' => 'homepage',
                'template_name' => 'layouts.shop',
                'route_name' => 'home',
                'url_path' => '/',
                'page_title' => 'Trang ch·ªß - Website c·ªßa b·∫°n',
                'meta_description' => 'Ch√†o m·ª´ng ƒë·∫øn v·ªõi website c·ªßa ch√∫ng t√¥i. Kh√°m ph√° c√°c s·∫£n ph·∫©m v√† d·ªãch v·ª• tuy·ªát v·ªùi.',
                'meta_keywords' => ['trang ch·ªß', 's·∫£n ph·∫©m', 'd·ªãch v·ª•'],
                'page_blocks' => [
                    [
                        'type' => 'hero',
                        'data' => [
                            'title' => 'Ch√†o m·ª´ng ƒë·∫øn v·ªõi Website',
                            'subtitle' => 'Kh√°m ph√° c√°c s·∫£n ph·∫©m tuy·ªát v·ªùi',
                            'background_image' => '/images/hero-bg.jpg',
                            'cta_text' => 'Xem s·∫£n ph·∫©m',
                            'cta_url' => '/products'
                        ]
                    ],
                    [
                        'type' => 'products',
                        'data' => [
                            'title' => 'S·∫£n ph·∫©m n·ªïi b·∫≠t',
                            'limit' => 8,
                            'featured' => true,
                            'layout' => 'grid'
                        ]
                    ],
                    [
                        'type' => 'posts',
                        'data' => [
                            'title' => 'Tin t·ª©c m·ªõi nh·∫•t',
                            'limit' => 4,
                            'layout' => 'cards'
                        ]
                    ]
                ],
                'layout_template' => 'layouts.shop',
                'use_sidebar' => false,
                'content_width' => 12,
                'mobile_optimized' => true,
                'content_type' => 'mixed',
                'cache_enabled' => true,
                'cache_duration' => 3600,
                'visibility' => 'public',
                'is_published' => true,
                'published_at' => now(),
                'author_id' => 1,
                'language' => 'vi',
                'track_analytics' => true,
                'status' => 'published',
                'order' => 1
            ],
            [
                'name' => 'Trang gi·ªõi thi·ªáu',
                'slug' => 'gioi-thieu',
                'description' => 'Trang gi·ªõi thi·ªáu v·ªÅ c√¥ng ty',
                'page_type' => 'about',
                'route_name' => 'about',
                'url_path' => '/gioi-thieu',
                'page_title' => 'Gi·ªõi thi·ªáu - V·ªÅ ch√∫ng t√¥i',
                'meta_description' => 'T√¨m hi·ªÉu v·ªÅ l·ªãch s·ª≠, s·ª© m·ªánh v√† t·∫ßm nh√¨n c·ªßa ch√∫ng t√¥i.',
                'page_blocks' => [
                    [
                        'type' => 'text',
                        'data' => [
                            'content' => '<h1>V·ªÅ ch√∫ng t√¥i</h1><p>Ch√∫ng t√¥i l√† m·ªôt c√¥ng ty chuy√™n cung c·∫•p c√°c s·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng cao...</p>'
                        ]
                    ],
                    [
                        'type' => 'image',
                        'data' => [
                            'src' => '/images/about-us.jpg',
                            'alt' => 'V·ªÅ ch√∫ng t√¥i',
                            'css_class' => 'img-fluid rounded'
                        ]
                    ]
                ],
                'use_sidebar' => true,
                'sidebar_position' => 'right',
                'content_width' => 9,
                'sidebar_width' => 3,
                'is_published' => true,
                'published_at' => now(),
                'status' => 'published',
                'order' => 2
            ]
        ];

        foreach ($pages as $pageData) {
            PageBuilder::firstOrCreate(
                ['slug' => $pageData['slug']],
                $pageData
            );
        }

        $this->command->info('‚úÖ ƒê√£ t·∫°o ' . count($pages) . ' page builders');
    }

    /**
     * T·∫°o widget settings
     */
    private function createWidgetSettings()
    {
        $widgets = [
            [
                'name' => 'T√¨m ki·∫øm',
                'slug' => 'tim-kiem',
                'description' => 'Widget t√¨m ki·∫øm s·∫£n ph·∫©m v√† b√†i vi·∫øt',
                'widget_type' => 'search',
                'widget_config' => [
                    'placeholder' => 'T√¨m ki·∫øm...',
                    'search_types' => ['products', 'posts'],
                    'show_suggestions' => true
                ],
                'position' => 'sidebar_right',
                'order_position' => 1,
                'show_on_mobile' => true,
                'show_on_tablet' => true,
                'show_on_desktop' => true,
                'show_for_guests' => true,
                'show_title' => true,
                'title_tag' => 'h3',
                'wrapper_tag' => 'div',
                'css_class' => 'widget widget-search',
                'cache_enabled' => false,
                'status' => 'active',
                'is_system_widget' => true,
                'order' => 1
            ],
            [
                'name' => 'S·∫£n ph·∫©m m·ªõi',
                'slug' => 'san-pham-moi',
                'description' => 'Hi·ªÉn th·ªã danh s√°ch s·∫£n ph·∫©m m·ªõi nh·∫•t',
                'widget_type' => 'recent_products',
                'widget_config' => [
                    'limit' => 5,
                    'show_price' => true,
                    'show_image' => true,
                    'image_size' => 'thumbnail'
                ],
                'position' => 'sidebar_right',
                'order_position' => 2,
                'show_on_mobile' => false,
                'show_on_tablet' => true,
                'show_on_desktop' => true,
                'show_for_guests' => true,
                'cache_enabled' => true,
                'cache_duration' => 1800,
                'status' => 'active',
                'order' => 2
            ],
            [
                'name' => 'B√†i vi·∫øt m·ªõi',
                'slug' => 'bai-viet-moi',
                'description' => 'Hi·ªÉn th·ªã danh s√°ch b√†i vi·∫øt m·ªõi nh·∫•t',
                'widget_type' => 'recent_posts',
                'widget_config' => [
                    'limit' => 5,
                    'show_date' => true,
                    'show_excerpt' => false,
                    'show_thumbnail' => true
                ],
                'position' => 'sidebar_right',
                'order_position' => 3,
                'show_on_mobile' => false,
                'show_on_tablet' => true,
                'show_on_desktop' => true,
                'cache_enabled' => true,
                'cache_duration' => 1800,
                'status' => 'active',
                'order' => 3
            ],
            [
                'name' => 'ƒêƒÉng k√Ω nh·∫≠n tin',
                'slug' => 'dang-ky-nhan-tin',
                'description' => 'Form ƒëƒÉng k√Ω nh·∫≠n b·∫£n tin email',
                'widget_type' => 'newsletter',
                'widget_config' => [
                    'title' => 'ƒêƒÉng k√Ω nh·∫≠n tin',
                    'description' => 'Nh·∫≠n th√¥ng tin v·ªÅ s·∫£n ph·∫©m m·ªõi v√† khuy·∫øn m√£i',
                    'placeholder' => 'Nh·∫≠p email c·ªßa b·∫°n',
                    'button_text' => 'ƒêƒÉng k√Ω'
                ],
                'position' => 'footer',
                'order_position' => 1,
                'show_on_mobile' => true,
                'show_on_tablet' => true,
                'show_on_desktop' => true,
                'show_for_guests' => true,
                'css_class' => 'widget widget-newsletter',
                'status' => 'active',
                'order' => 4
            ],
            [
                'name' => 'Th√¥ng tin li√™n h·ªá',
                'slug' => 'thong-tin-lien-he',
                'description' => 'Hi·ªÉn th·ªã th√¥ng tin li√™n h·ªá c·ªßa c√¥ng ty',
                'widget_type' => 'contact_info',
                'widget_config' => [
                    'show_address' => true,
                    'show_phone' => true,
                    'show_email' => true,
                    'show_icons' => true
                ],
                'content' => '<div class="contact-info">
                    <p><i class="fas fa-map-marker-alt"></i> 123 ƒê∆∞·ªùng ABC, Qu·∫≠n 1, TP.HCM</p>
                    <p><i class="fas fa-phone"></i> 0123 456 789</p>
                    <p><i class="fas fa-envelope"></i> info@example.com</p>
                </div>',
                'position' => 'footer',
                'order_position' => 2,
                'show_on_mobile' => true,
                'show_on_tablet' => true,
                'show_on_desktop' => true,
                'css_class' => 'widget widget-contact-info',
                'status' => 'active',
                'order' => 5
            ]
        ];

        foreach ($widgets as $widgetData) {
            WidgetSetting::firstOrCreate(
                ['slug' => $widgetData['slug']],
                $widgetData
            );
        }

        $this->command->info('‚úÖ ƒê√£ t·∫°o ' . count($widgets) . ' widget settings');
    }

    /**
     * T·∫°o web design settings
     */
    private function createWebDesignSettings()
    {
        $webDesignData = [
            // Hero Banner
            'hero_banner_enabled' => true,
            'hero_banner_order' => 1,
            'hero_banner_title' => 'Ch√†o m·ª´ng ƒë·∫øn v·ªõi Core Laravel Framework',
            'hero_banner_description' => 'Framework m·∫°nh m·∫Ω v√† linh ho·∫°t cho m·ªçi d·ª± √°n web',
            'hero_banner_bg_color' => 'bg-white',

            // Courses Overview
            'courses_overview_enabled' => true,
            'courses_overview_order' => 2,
            'courses_overview_title' => 'S·∫£n ph·∫©m n·ªïi b·∫≠t',
            'courses_overview_description' => 'Kh√°m ph√° c√°c s·∫£n ph·∫©m ch·∫•t l∆∞·ª£ng cao c·ªßa ch√∫ng t√¥i',
            'courses_overview_bg_color' => 'bg-gray-50',

            // Album Timeline
            'album_timeline_enabled' => true,
            'album_timeline_order' => 3,
            'album_timeline_title' => 'H√¨nh ·∫£nh ho·∫°t ƒë·ªông',
            'album_timeline_description' => 'Nh·ªØng kho·∫£nh kh·∫Øc ƒë√°ng nh·ªõ trong h√†nh tr√¨nh ph√°t tri·ªÉn',
            'album_timeline_bg_color' => 'bg-white',

            // Course Groups
            'course_groups_enabled' => true,
            'course_groups_order' => 4,
            'course_groups_title' => 'Danh m·ª•c s·∫£n ph·∫©m',
            'course_groups_description' => 'T√¨m hi·ªÉu c√°c danh m·ª•c s·∫£n ph·∫©m ƒëa d·∫°ng',
            'course_groups_bg_color' => 'bg-gray-50',

            // Course Categories
            'course_categories_enabled' => true,
            'course_categories_order' => 5,
            'course_categories_title' => 'Th·ªÉ lo·∫°i n·ªôi dung',
            'course_categories_description' => 'Kh√°m ph√° n·ªôi dung theo t·ª´ng ch·ªß ƒë·ªÅ',
            'course_categories_bg_color' => 'bg-white',

            // Testimonials
            'testimonials_enabled' => true,
            'testimonials_order' => 6,
            'testimonials_title' => 'ƒê√°nh gi√° kh√°ch h√†ng',
            'testimonials_description' => 'Nh·ªØng ph·∫£n h·ªìi t√≠ch c·ª±c t·ª´ kh√°ch h√†ng c·ªßa ch√∫ng t√¥i',
            'testimonials_bg_color' => 'bg-red-50',

            // FAQ
            'faq_enabled' => true,
            'faq_order' => 7,
            'faq_title' => 'C√¢u h·ªèi th∆∞·ªùng g·∫∑p',
            'faq_description' => 'T√¨m c√¢u tr·∫£ l·ªùi cho nh·ªØng th·∫Øc m·∫Øc ph·ªï bi·∫øn',
            'faq_bg_color' => 'bg-white',

            // Partners
            'partners_enabled' => true,
            'partners_order' => 8,
            'partners_title' => 'ƒê·ªëi t√°c tin c·∫≠y',
            'partners_description' => 'Nh·ªØng ƒë·ªëi t√°c ƒë·ªìng h√†nh c√πng ch√∫ng t√¥i',
            'partners_bg_color' => 'bg-gray-50',

            // Blog Posts
            'blog_posts_enabled' => true,
            'blog_posts_order' => 9,
            'blog_posts_title' => 'Tin t·ª©c & Blog',
            'blog_posts_description' => 'C·∫≠p nh·∫≠t nh·ªØng th√¥ng tin m·ªõi nh·∫•t t·ª´ ch√∫ng t√¥i',
            'blog_posts_bg_color' => 'bg-white',

            // Homepage CTA
            'homepage_cta_enabled' => true,
            'homepage_cta_order' => 10,
            'homepage_cta_title' => 'B·∫Øt ƒë·∫ßu ngay h√¥m nay',
            'homepage_cta_description' => 'Tham gia c√πng h√†ng ngh√¨n ng∆∞·ªùi d√πng ƒë√£ tin t∆∞·ªüng Core Laravel Framework',
            'homepage_cta_primary_button_text' => 'Kh√°m ph√° ngay',
            'homepage_cta_primary_button_link' => '/products',
            'homepage_cta_secondary_button_text' => 'Li√™n h·ªá t∆∞ v·∫•n',
            'homepage_cta_secondary_button_link' => '/contact',
            'homepage_cta_bg_color' => 'bg-red-600',

            // Global Settings
            'animations_enabled' => true,
            'animation_speed' => 'normal',
            'enabled_animations' => ['fade', 'slide'],
            'lazy_loading_enabled' => true,
            'cache_duration' => 3600,

            // Meta
            'last_updated_at' => now(),
            'updated_by' => 1, // Admin user
        ];

        $webDesign = WebDesign::firstOrCreate([], $webDesignData);

        $this->command->info('‚úÖ ƒê√£ t·∫°o c√†i ƒë·∫∑t web design m·∫∑c ƒë·ªãnh');
    }
}
